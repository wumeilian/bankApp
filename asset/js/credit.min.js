function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=window.location.search.substr(1).match(t);return null!=i?decodeURI(i[2]):null}function initOrder(){var e=GetQueryString("n"),t=GetQueryString("c"),i=GetQueryString("p"),n=decodeURI(GetQueryString("u")),r=Mustache.render(tem_order,{imgurl:n,name:e,credit:t,price:i});$(".order-info .title").html(r),$(".result .total").text(t)}function initTab(){$(".btn-style").on("click",".btn",function(){$(".btn-style .btn").removeClass("btn-select"),$(this).addClass("btn-select"),0==$(this).index()?($(".style-self").removeClass("hidden"),$(".style-mail").addClass("hidden")):($(".style-mail").removeClass("hidden"),$(".style-self").addClass("hidden"))})}function numClick(){var e=$(".buy-num span").text(),t=GetQueryString("c");$("#creditOrder").on("click"," .reduce",function(){e>1&&(--e,$(".buy-num span").text(e),$(".result .total").text(e*t))}),$("#creditOrder").on("click"," .add",function(){++e,$(".buy-num span").text(e),$(".result .total").text(e*t)})}function initDetial(){if(0==dataDetail.Code&&dataDetail.Items){var e=dataDetail.Items,t=e.slideImg.map(function(e){return Mustache.render(tem_slide,{imgurl:e})});$("#creditDetail .swiper-wrapper").html(t),initSlide();var i=Mustache.render(tem_info,{name:e.name,num:e.size,credit:e.credit,price:e.price});$("#creditDetail .detail-txt").html(i);var n=e.detailImg.map(function(e){return Mustache.render(tem_img,{imgurl:e})});$("#creditDetail .img").html(n);var r="order.html?n="+encodeURI(e.name)+"&c="+encodeURI(e.credit)+"&p="+encodeURI(e.price)+"&u="+encodeURI(e.imgurl);$("#creditDetail .change").attr("href",r)}}function initSlide(){new Swiper(".swiper-container",{loop:!0,pagination:".swiper-pagination"})}function initList(){if(0==data.Code&&data.Items.length>0){var e=data.Items.map(function(e){return Mustache.render(template.listTemplate,{id:e.id,imgurl:e.imgurl,title:e.title,middle:e.num+"积分",bottom:"原价：￥ "+e.price})});$("#creditHome .mod-list").html(e)}}$(document).ready(function(){$("#creditHome").length>0&&initList(),$("#creditDetail").length>0&&initDetial(),$("#creditOrder").length>0&&(initOrder(),initTab(),numClick())});var data={Code:0,Items:[{id:0,title:"康佳 中国梦 电热水壶",num:"30",price:"199",imgurl:"../../asset/images/credit_1.png"},{id:1,title:"康佳 中国梦 电热水壶",num:"30",price:"199",imgurl:"../../asset/images/credit_1.png"},{id:2,title:"康佳 中国梦 电热水壶",num:"30",price:"199",imgurl:"../../asset/images/credit_1.png"},{id:3,title:"康佳 中国梦 电热水壶",num:"30",price:"199",imgurl:"../../asset/images/credit_1.png"},{id:4,title:"康佳 中国梦 电热水壶",num:"30",price:"199",imgurl:"../../asset/images/credit_1.png"},{id:5,title:"康佳 中国梦 电热水壶",num:"30",price:"199",imgurl:"../../asset/images/credit_1.png"}]},dataDetail={Code:0,Items:{id:1,name:"康佳 中国梦 电热水壶",size:"500ml/个",credit:"30",price:192,imgurl:"../../asset/images/credit_1.png",slideImg:["../../asset/images/credit_1.png","../../asset/images/credit_1.png","../../asset/images/credit_1.png"],detailImg:["../../asset/images/credit_2.png","../../asset/images/credit_2.png"]}};